DATAS SEGMENT 
str1 db 255 dup(?) 
DATAS ENDS 

STACKS SEGMENT 
db 200 dup(?) 
STACKS ENDS 

CODES SEGMENT 
ASSUME CS:CODES,DS:DATAS,SS:STACKS 
START: 
MOV AX,DATAS 
MOV DS,AX 
MOV SI,OFFSET STR1 
MOV CX,100H ;循环次数 
AGAIN: 
MOV AH,01H 
INT 21H 
CMP AL,24H ;回车的时候结束 
JZ OUT1 
MOV [SI],AL ;保持输入的字符串 
INC SI 
LOOP AGAIN 
OUT1: 
MOV [SI],AL ;把回车作为结束符号 
MOV SI,OFFSET STR1 
MOV CX,100H 
L1: 
MOV BL,[SI] 
CMP BL,24H ;检查是否到结束了 
JZ OUT2 ;结束就退出 
CALL XCHGSTR 
INC SI 
LOOP L1 
OUT2: 
MOV CX,100H 
MOV SI,OFFSET STR1 
L2: MOV AL,[SI] 
CMP AL,24H 
JZ OUT3 
MOV DL,AL 
MOV AH,02H 
INT 21H 
INC SI 
LOOP L2 
OUT3: 
MOV AH,4CH 
INT 21H 
XCHGSTR: 
MOV AL,[SI] ;取出数据 
OR AL,20H ;让其第5位为1 
MOV [SI],AL ;将其保存 
RET 
CODES ENDS 
END START